<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper    
    PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"    
    "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="cn.dao.tds.TdsHomeMapper">



	<select id="countByUserId" parameterType="HashMap" resultType="Map">
		SELECT
		overplus_commission overplusCommission,
		(
		SELECT
		SUM(sum_money)
		FROM
		tds_user_customer
		WHERE
		user_id IN (
		SELECT
		id
		FROM
		tds_user
		WHERE
		parent_user_id =#{userId}
		and is_deleted='0'
		)
		) sumMoney,
		(
		SELECT
		count(1) AS counts
		FROM
		tds_user
		WHERE
		parent_user_id =#{userId}
		AND is_deleted = '0'
		) counts
		FROM
		tds_user_customer
		WHERE
		user_id =#{userId}
		AND is_deleted = '0'
	</select>





</mapper>